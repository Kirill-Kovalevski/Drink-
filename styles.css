/* ===== דרינק! — RTL + Wave Fullscreen + Galleon Title + Perfect Layout ===== */
:root{
  --ink:#0b132b; --foam:#f7fbff;
  --sea-0:#e6f3ff; --sea-1:#cfe8ff; --sea-2:#9cd1ff; --sea-3:#5fb9ff; --sea-4:#2aa1ff;
  --accent:#6f5bf0; --good:#00a389; --warn:#ffb020; --danger:#e24d4d;
  --radius:18px; --shadow:0 20px 60px rgba(0,40,120,.12);
  --river-hue:205;
  --ctrl-h:46px; --ctrl-r:12px; --btn-min:200px; --icon-btn-s:36px; --icon-s:16px;
}
*{box-sizing:border-box} html,body{height:100%}
body{
  margin:0; direction:rtl; color:var(--ink);
  font-family:"Rubik",system-ui,"Segoe UI",Arial,sans-serif;
  background: radial-gradient(1200px 600px at 100% -10%, #ffffffaa, transparent 60%), linear-gradient(180deg, var(--sea-0), var(--sea-1));
  overflow-x:hidden;
}

/* ========== Header: Full-screen wave ========== */
.o-header{padding:0 max(16px, env(safe-area-inset-right)) 0 max(16px, env(safe-area-inset-left))}
.ripple-hero{position:relative; height:120px; border-radius:0 0 24px 24px; overflow:hidden; box-shadow:0 18px 40px rgba(42,161,255,.2); margin-bottom:10px}
.ripple-hero.edge{ margin-inline:calc(50% - 50vw); width:100vw; padding-inline: env(safe-area-inset-left) env(safe-area-inset-right) }
.ripple-hero canvas{display:block; width:100%; height:100%}
.hero-full{ height: calc(100dvh - 24px); }
@media (min-width:860px){ .hero-full{ height: 52vh; } }

.hero-overlay{position:absolute; inset:0; display:flex; align-items:flex-start; justify-content:flex-end; pointer-events:none; padding: max(12px, env(safe-area-inset-top)) 20px 0 20px}
.hero-overlay.left{justify-content:flex-start}

/* ===== Galleon (ספינת מפרשים חדשה) ===== */
.galleon{ position:relative; pointer-events:auto; width:min(620px,70vw); height:190px; filter: drop-shadow(0 18px 38px rgba(0,0,0,.15)); }
.g-hull{
  position:absolute; bottom:0; left:0; right:0; height:84px;
  background: linear-gradient(180deg, #123055, #0c213d);
  border-radius: 40px 40px 20px 20px / 52px 52px 20px 20px;
  box-shadow: inset 0 6px 14px rgba(255,255,255,.12), inset 0 -14px 26px rgba(0,0,0,.35);
}
.g-stern{ position:absolute; bottom:52px; right:-12px; width:120px; height:70px; border-radius: 24px; background:linear-gradient(180deg,#173d6d,#0d2544); box-shadow: inset 0 6px 12px rgba(255,255,255,.18)}
.g-prow{ position:absolute; bottom:42px; left:-18px; width:88px; height:44px; border-radius: 0 0 44px 44px; background: linear-gradient(180deg,#123055,#0c213d); transform: rotate(10deg) }
.g-mast{ position:absolute; bottom:92px; left:48%; width:10px; height:140px; background:linear-gradient(180deg,#815736,#5a391f); border-radius:8px }
.g-sail{ position:absolute; top:10px; left:50%; width:160px; height:74px; background:linear-gradient(180deg,#fffffff0,#ecf6ffcc); border:1px solid #d8eaff; border-radius:22px 8px 22px 8px; transform-origin:left center; backdrop-filter: blur(2px)}
.g-sail-a{ transform: skewX(-12deg) rotate(4deg) translateX(8px) }
.g-sail-b{ top:70px; height:66px; transform: skewX(-10deg) rotate(1deg) translateX(-4px) }
.g-flag{ position:absolute; top:0; left:calc(50% + 4px); width:48px; height:18px; background:linear-gradient(90deg,#22d3ee,#60a5fa); border-radius:0 12px 12px 0; transform:skewX(-15deg); box-shadow:0 6px 12px rgba(0,0,0,.18)}
.g-portholes{ position:absolute; bottom:18px; left:22px; display:flex; gap:10px }
.g-portholes span{ width:12px; height:12px; border-radius:50%; background:#93c5fd; box-shadow:inset 0 0 0 2px #e6f3ff; opacity:.9 }

.g-title{
  position:absolute; bottom:16px; right:18px; text-align:right;
  padding:10px 14px; border-radius:14px;
  background: linear-gradient(180deg, rgba(255,255,255,.82), rgba(255,255,255,.55));
  border:1px solid rgba(255,255,255,.75); backdrop-filter: blur(6px) saturate(130%);
}
.brand-he{
  margin:0; font:900 clamp(38px,5.6vw,78px)/0.95 "Frank Ruhl Libre",serif;
  background:linear-gradient(180deg,#0e1930,#1e40af 45%,#22d3ee 95%);
  -webkit-background-clip:text; background-clip:text; color:transparent;
  text-shadow:0 2px 0 #fff8,0 10px 18px rgba(34,211,238,.24);
}
.brand-sub{margin:2px 2px 0 0; font:700 clamp(12px,1.5vw,18px)/1 "Rubik"; color:#0f2c4a; opacity:.85}

/* Quote */
.quote{display:inline-block; margin:10px 16px 12px; padding:12px 14px; border-radius:14px; background:linear-gradient(180deg,#ffffffcc,#e9f4ff); border:1px solid #d6e9ff; box-shadow:0 10px 30px rgba(42,161,255,.18)}

/* Confetti canvas full-screen */
.confetti-top{position:fixed; inset:0; width:100vw; height:100vh; pointer-events:none; z-index:999;}

/* ========== Layout cards ========== */
.o-main{max-width:1100px; margin:8px auto 70px; padding:0 max(16px, env(safe-area-inset-right)) 0 max(16px, env(safe-area-inset-left)); display:grid; gap:24px; grid-template-columns:repeat(auto-fit,minmax(360px,1fr))}
.card{background:radial-gradient(80% 60% at 100% -20%,rgba(255,255,255,.9),transparent 40%),linear-gradient(180deg,#fff,var(--sea-0)); border-radius:var(--radius); box-shadow:var(--shadow); padding:24px; border:1px solid rgba(42,161,255,.15)}
.card-title{margin:0 0 10px; font-weight:900}

/* ===== Form ===== */
.grid{display:grid; gap:10px} .row{display:flex; gap:10px; align-items:center; flex-wrap:wrap}
label{display:flex; flex-direction:column; gap:6px; font-weight:800}
input,select,button{font:inherit}

/* מסירים חיצים משדות מספריים ונותנים יישור מלא */
input[type="number"]{border:1px solid #cfe0ff; background:#fff; padding:10px 12px; border-radius:12px; min-height:var(--ctrl-h); -moz-appearance:textfield}
input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button{ -webkit-appearance:none; margin:0 }

/* תבנית של שלושת השורות — אותו גריד */
.metric-row{
  display:grid;
  grid-template-columns: minmax(var(--btn-min),1fr) 1fr;
  gap:12px;
  align-items:center;
}
.metric-row .stepper{
  display:grid; grid-template-columns:46px 1fr 46px; gap:10px; align-items:center;
}
.step{width:46px; height:46px; border-radius:12px; border:1px solid #cfe0ff; background:#fff; cursor:pointer; font-weight:900}

/* Select עם חץ מותאם + ריווח (הטקסט לא נוגע בחץ) */
.nice-select{ appearance:none; border:1px solid #cfe0ff; background:#fff; padding:10px 42px 10px 12px; border-radius:12px; min-height:var(--ctrl-h);
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="%2360a5fa" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>');
  background-repeat:no-repeat; background-position: 12px center;
}
.select-suffix{position:relative; display:flex; align-items:center}
.select-suffix .with-suffix{width:100%}
.select-suffix .suffix{position:absolute; inset-inline-end:12px; pointer-events:none; color:#0f2c4a; opacity:.8; font-weight:800}

/* Checkboxes compact */
.one-line{gap:10px} .one-line .spacer{flex:1}
.check{display:inline-flex; align-items:center; gap:6px; font-weight:800}
.check>input{appearance:none; width:18px; height:18px; border-radius:6px; border:2px solid #b9d6ff; background:#fff; display:grid; place-items:center; transition:border-color .2s, background .2s, box-shadow .2s}
.check>input::after{content:""; width:10px; height:10px; border-radius:2px; transform:scale(0); background:var(--sea-4); transition:transform .18s cubic-bezier(.2,.7,.3,1.4)}
.check>input:checked{border-color:var(--sea-4); box-shadow:inset 0 0 0 2px #fff}
.check>input:checked::after{transform:scale(1)}

/* Icons small & round */
.btn.icon-btn{width:var(--icon-btn-s); height:var(--icon-btn-s); min-inline-size:var(--icon-btn-s); padding:8px; border-radius:999px; border:1px solid #cfe0ff; background:radial-gradient(160% 150% at 0% 100%,#fff,#eef6ff); box-shadow:0 6px 14px rgba(42,161,255,.2), inset 0 0 0 1px #fff}
.btn.icon-btn .icon{width:var(--icon-s); height:var(--icon-s); display:block; filter:drop-shadow(0 1px 1px rgba(0,0,0,.05))}
.btn.icon-btn:hover{box-shadow:0 10px 22px rgba(42,161,255,.26), inset 0 0 0 1px #fff}
.btn.icon-btn:active{transform:translateY(1px)}

/* Buttons equal & airy */
.btn{border:none; border-radius:14px; padding:12px 16px; cursor:pointer; transition:transform .15s, box-shadow .3s, filter .25s; background:linear-gradient(180deg,var(--sea-3),var(--sea-4)); color:white; box-shadow:0 8px 24px rgba(42,161,255,.35); min-inline-size:var(--btn-min); height:var(--ctrl-h); font-weight:800}
.btn.equal{flex:1 1 0; min-inline-size:var(--btn-min)}
.btn.primary{background:linear-gradient(180deg,#67e8f9,#22d3ee); color:#032b36}
.btn.danger{background:linear-gradient(180deg,#ff8a8a,#e24d4d)}
.btn.ghost{background:#fff; color:var(--ink); border:1px solid #cfe0ff; box-shadow:none}
.btn-row{display:grid; grid-template-columns:repeat(auto-fit,minmax(var(--btn-min),1fr)); gap:16px; align-items:stretch}
.btn-row.roomy{margin-block:16px}

/* Progress river */
.progress{margin-top:12px; position:relative; overflow:hidden}
.progress-head{display:flex; justify-content:space-between; align-items:center; gap:12px}
.progress.edge .progress-bar{ margin-inline:calc(50% - 50vw); width:100vw; padding-inline:env(safe-area-inset-left) env(safe-area-inset-right) }
.progress-bar.capsule{height:32px; border-radius:999px; background:#0e1b2a; border:1px solid rgba(22,58,116,.35); overflow:hidden; position:relative; box-shadow:inset 0 6px 12px rgba(0,0,0,.35), 0 10px 30px rgba(42,161,255,.18)}
.fill{height:100%; width:0%; position:relative; overflow:hidden; background:linear-gradient(90deg,#7dd3fc,#38bdf8 60%,#60a5fa 100%); background-size:180% 100%; animation:flow 8s linear infinite; transition:width .6s cubic-bezier(.22,1,.36,1)}
.fill.stage2{background-image:linear-gradient(90deg,#34d399,#22d3ee 60%,#60a5fa 100%)}
.fill.stage3{background-image:linear-gradient(90deg,#60a5fa,#7c3aed 60%,#a78bfa 100%)}
@keyframes flow{from{background-position:0% 50%}to{background-position:100% 50%}}
.droplet{position:absolute; top:50%; transform:translate(-50%,-50%); inset-inline-start:calc(var(--pct,0)*1%); width:22px; height:22px; border-radius:50% 50% 55% 55%/60% 60% 40% 40%; background:radial-gradient(circle at 30% 30%,#fff,#b9e2ff); box-shadow:0 8px 20px rgba(42,161,255,.35)}
#bubbles{position:absolute; inset:0; width:100%; height:100%; pointer-events:none}

/* יעד ממורכז + שימר */
.totals{display:flex; justify-content:center; margin:8px 0 6px}
.total-item{display:flex; align-items:center; gap:10px; font-size:1.06rem; font-weight:900;}
.total-item .num{ background:linear-gradient(180deg,#0e1930,#1e40af 45%,#22d3ee 95%); -webkit-background-clip:text; background-clip:text; color:transparent }
.shimmer{position:relative; overflow:hidden}
.shimmer::after{
  content:""; position:absolute; inset:0; transform:translateX(-120%);
  background:linear-gradient(120deg, transparent 10%, rgba(255,255,255,.85) 35%, transparent 60%);
  animation:shine 2.4s infinite;
}
@keyframes shine{ 0%{transform:translateX(-120%)} 60%{transform:translateX(120%)} 100%{transform:translateX(120%)} }

/* Modals — מסך מלא ומרוכזים */
.modal[hidden]{display:none!important}
.modal{position:fixed!important; inset:0!important; width:100dvw!important; height:100dvh!important; z-index:9999!important; display:grid; place-items:center}
.modal-backdrop{position:fixed!important; inset:0!important; width:100dvw!important; height:100dvh!important; background:linear-gradient(180deg,rgba(8,14,28,.45),rgba(8,14,28,.35)); backdrop-filter:blur(6px) saturate(120%)}
.modal-card{position:relative; max-width:min(92vw,640px); width:min(92vw,640px); border-radius:18px; padding:16px; background:#fff; border:1px solid #dbeafe; box-shadow:0 28px 80px rgba(0,0,0,.28)}
.chips{display:grid; grid-template-columns:repeat(auto-fit,minmax(110px,1fr)); gap:10px}
.chip{height:38px; display:grid; place-items:center; border-radius:999px; border:1px solid #cfe0ff; background:#fff; font-weight:800}
.chip.active{border-color:#22b0ff; box-shadow:0 0 0 3px rgba(34,176,255,.18)}

/* Footer */
.o-foot{display:flex; justify-content:center; padding:26px 10px; color:#1f2c45}
.footnote{opacity:.7}

/* Responsive tweaks */
@media (max-width:414px){
  .o-main{grid-template-columns:1fr; gap:18px}
  .card{padding:20px}
  .btn-row{grid-template-columns:1fr 1fr}
}
@media (min-width:1200px){
  .o-main{grid-template-columns:repeat(2,minmax(420px,1fr)); gap:28px}
  .card{padding:30px}
}
