<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>דרינק! — מונה מים אישי</title>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;600;800&family=Frank+Ruhl+Libre:wght@700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="o-header">
    <div class="hdr-inner">
      <div class="hero-title">
        <h1 class="brand-he">דרינק!</h1>
        <p class="brand-sub">מונה מים אישי</p>
      </div>

      <!-- ריפלים Edge-to-Edge -->
      <div class="ripple-hero edge" aria-hidden="true">
        <canvas id="rippleHero"></canvas>
      </div>

      <blockquote id="quote" class="quote" aria-live="polite">טוען…</blockquote>
    </div>
  </header>

  <main class="o-main">
    <section class="card">
      <h2 class="card-title">מחשבון צריכת מים יומית</h2>

      <form id="calcForm" class="grid">
        <label>מין
          <select id="sex" required>
            <option value="female">נקבה</option>
            <option value="male">זכר</option>
          </select>
        </label>

        <!-- משקל -->
        <label>משקל
          <div class="row weight-row">
            <button id="openWeight" class="btn ghost equal" type="button">בחר/י משקל</button>
            <div class="stepper">
              <button class="step" type="button" id="wMinus" aria-label="פחות">−</button>
              <input id="weight" type="number" min="30" max="200" step="0.5" inputmode="decimal" />
              <button class="step" type="button" id="wPlus" aria-label="יותר">+</button>
            </div>
            <select id="unit"><option value="kg">ק״ג</option><option value="lb">ליברות</option></select>
          </div>
        </label>

        <!-- גיל -->
        <label>גיל
          <div class="row">
            <button id="openAge" class="btn ghost equal" type="button">בחר/י גיל</button>
            <input id="age" type="number" min="5" max="120" placeholder="בשנים" />
          </div>
        </label>

        <!-- גובה (ס״מ *בפנים*) -->
        <label>גובה
          <div class="row">
            <button id="openHeight" class="btn ghost equal" type="button">בחר/י גובה</button>
            <div class="input-suffix">
              <input id="height" type="number" min="100" max="230" step="1" placeholder="גובה" />
              <span class="suffix">ס״מ</span>
            </div>
          </div>
        </label>

        <label>דקות פעילות היום
          <input id="activeMin" type="number" min="0" step="5" placeholder="לדוגמה 30" />
        </label>

        <!-- צ׳קבוקסים + שני הכפתורים זה לצד זה -->
        <div class="checks row one-line">
          <label class="check"><input id="isHot" type="checkbox" /><span>אקלים חם</span></label>
          <label class="check female-only"><input id="pregnant" type="checkbox" /><span>בהריון</span></label>
          <label class="check female-only"><input id="lactating" type="checkbox" /><span>מניקה</span></label>

          <div class="spacer"></div>
          <button id="openAltitude" class="btn ghost tiny" type="button" title="גובה מקום">גובה-מקום ⛰️</button>
          <button id="openCoffee" class="btn ghost tiny" type="button" title="קפה/מ״ל">קפה ☕</button>
        </div>

        <button class="btn ripple equal" type="submit">חשב/י</button>
      </form>

      <output id="result" class="result">
        <div class="totals">
          <div class="total-item">
            <span class="lbl">יעד:</span>
            <span id="targetL" class="num">—</span>
            <span class="unit">ליטר</span>
            <span class="cups" title="כוס ~240 מ״ל">
              <svg viewBox="0 0 24 24" class="cup"><path d="M6 3h12v3h2a2 2 0 0 1 2 2v2c0 3.866-3.134 7-7 7H6V3zM6 18h9a5 5 0 0 1-5 3H9a3 3 0 0 1-3-3z" fill="currentColor"/></svg>
              <span id="targetCups" class="num">—</span>
              <span class="unit">כוסות</span>
            </span>
          </div>
        </div>

        <!-- נהר Edge-to-Edge -->
        <div class="progress river edge" id="river">
          <div class="progress-head">
            <label for="progressRange">שתייה היום</label>
            <div class="reading">
              <svg viewBox="0 0 24 24" class="cup sm"><path d="M6 3h12v3h2a2 2 0 0 1 2 2v2c0 3.866-3.134 7-7 7H6V3z" fill="currentColor"/></svg>
              <span id="intakeCups" class="num">0.0</span><span class="unit">כוס</span>
              <span class="sep">·</span>
              <span id="intakeMl" class="num">0</span><span class="unit">מ״ל</span>
            </div>
          </div>

          <div class="progress-bar capsule">
            <div id="bar" class="fill">
              <span class="droplet" aria-hidden="true"></span>
              <canvas id="bubbles"></canvas>
            </div>
          </div>

          <div class="row btn-row">
            <button id="add250"  class="btn ghost ripple equal">+250 מ״ל</button>
            <button id="add500"  class="btn ghost ripple equal">+500 מ״ל</button>
            <button id="add1000" class="btn ghost ripple equal">+1 ליטר</button>
            <button id="resetIntake" class="btn danger ripple equal">איפוס</button>
          </div>

          <input id="progressRange" type="range" min="0" max="4000" step="50" value="0" />
          <canvas id="confetti" class="confetti" aria-hidden="true"></canvas>
        </div>
      </output>
    </section>

    <section class="card">
      <h2 class="card-title">תזכורות והתראות</h2>
      <div class="grid">
        <label>כל כמה זמן להזכיר?
          <select id="remEvery"><option>15</option><option>30</option><option selected>45</option><option>60</option><option>90</option></select> דקות
        </label>
        <div class="checks row one-line tight">
          <label class="check"><input id="playSound" type="checkbox" checked /><span>צליל טפטוף</span></label>
          <label class="check"><input id="vibrate" type="checkbox" /><span>רטט בנייד</span></label>
        </div>
      </div>

      <div class="row btn-row bump">
        <button id="startRem" class="btn primary ripple equal">התחל תזכורות</button>
        <button id="stopRem"  class="btn danger  ripple equal">עצור</button>
        <button id="testPing" class="btn ripple equal">בדיקה</button>
      </div>

      <h3 class="h3">התראה חד־פעמית</h3>
      <div class="grid">
        <label>בחר/י זמן
          <select id="alarmMin"></select>
          דקות (1–180)
        </label>
      </div>
      <div class="row btn-row">
        <button id="startAlarm"  class="btn ripple equal">הפעל התראה</button>
        <button id="cancelAlarm" class="btn ghost ripple equal">בטל התראה</button>
      </div>
      <p class="micro">טיפ: אשר/י התראות בדפדפן כשתופיע בקשה.</p>
    </section>
  </main>

  <footer class="o-foot"><span class="footnote">© 2025 דרינק! · שתו במודעות וברכות.</span></footer>

  <!-- מודלים -->
  <div id="weightModal"  class="modal" hidden><div class="modal-backdrop"></div><div class="modal-card" role="dialog" aria-modal="true"><h3>בחר/י משקל</h3><div id="weightChips" class="chips"></div><div class="row"><button id="closeWeight" class="btn equal">סגור</button></div></div></div>
  <div id="ageModal"     class="modal" hidden><div class="modal-backdrop"></div><div class="modal-card" role="dialog" aria-modal="true"><h3>בחר/י גיל</h3><div id="ageChips" class="chips"></div><div class="row"><button id="closeAge" class="btn equal">סגור</button></div></div></div>
  <div id="heightModal"  class="modal" hidden><div class="modal-backdrop"></div><div class="modal-card" role="dialog" aria-modal="true"><h3>בחר/י גובה</h3><div id="heightChips" class="chips"></div><div class="row"><button id="closeHeight" class="btn equal">סגור</button></div></div></div>
  <div id="coffeeModal"  class="modal" hidden><div class="modal-backdrop"></div><div class="modal-card" role="dialog" aria-modal="true"><h3>קפה — כוסות או מ״ל</h3><div id="coffeeChips" class="chips"></div><div class="row" style="margin-top:10px"><input id="coffeeMl" type="number" min="0" step="10" placeholder="הכנס/י מ״ל" /><button id="setCoffeeMl" class="btn">שמור מ״ל</button></div><p class="micro">כל כוס (~240 מ״ל) מוסיפה ~100 מ״ל ליעד היומי.</p><div class="row"><button id="closeCoffee" class="btn equal">סגור</button></div></div></div>
  <div id="altitudeModal" class="modal" hidden><div class="modal-backdrop"></div><div class="modal-card" role="dialog" aria-modal="true"><h3>גובה-מקום</h3><div id="altitudeChips" class="chips"></div><div class="row"><button id="closeAltitude" class="btn equal">סגור</button></div></div></div>

  <script src="app.js"></script>
</body>
</html>
