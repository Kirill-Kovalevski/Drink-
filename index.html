<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>דרינק! — מונה מים אישי</title>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;600;800&family=Frank+Ruhl+Libre:wght@700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <!-- גל במסך מלא + ספינת מפרשים עם הכותרת -->
  <header class="o-header">
    <div class="ripple-hero edge hero-full">
      <canvas id="rippleHero"></canvas>

      <!-- הכותרת בתוך ספינת מפרשים (שמאל) -->
      <div class="hero-overlay left">
        <div class="ship">
          <div class="mast"></div>
          <div class="sail sail-a"></div>
          <div class="sail sail-b"></div>
          <div class="sail sail-c"></div>
          <div class="prow"></div>
          <div class="title">
            <h1 class="brand-he">דרינק!</h1>
            <p class="brand-sub">מונה מים אישי</p>
          </div>
        </div>
      </div>
    </div>

    <blockquote id="quote" class="quote" aria-live="polite">טוען…</blockquote>
  </header>

  <!-- קנבס קונפטי ענקי על כל המסך -->
  <canvas id="confettiTop" class="confetti-top" aria-hidden="true"></canvas>

  <main class="o-main">
    <!-- כרטיס המחשבון -->
    <section class="card">
      <h2 class="card-title">מחשבון צריכת מים יומית</h2>

      <form id="calcForm" class="grid">

        <label>מין
          <select id="sex" required>
            <option value="female">נקבה</option>
            <option value="male">זכר</option>
          </select>
        </label>

        <!-- משקל (בלי יחידות) -->
        <label>משקל
          <div class="row weight-row">
            <button id="openWeight" class="btn ghost equal" type="button">בחר/י משקל</button>
            <div class="stepper">
              <button class="step" type="button" id="wMinus" aria-label="פחות">−</button>
              <input id="weight" type="number" min="30" max="200" step="0.5" inputmode="decimal" />
              <button class="step" type="button" id="wPlus" aria-label="יותר">+</button>
            </div>
          </div>
        </label>

        <!-- גיל -->
        <label>גיל
          <div class="row">
            <button id="openAge" class="btn ghost equal" type="button">בחר/י גיל</button>
            <div class="stepper">
              <button class="step" type="button" id="aMinus" aria-label="פחות">−</button>
              <input id="age" type="number" min="5" max="120" step="1" placeholder="בשנים" />
              <button class="step" type="button" id="aPlus" aria-label="יותר">+</button>
            </div>
          </div>
        </label>

        <!-- גובה — אותו עיצוב כמו משקל/גיל (בלי ס״מ) -->
        <label>גובה
          <div class="row">
            <button id="openHeight" class="btn ghost equal" type="button">בחר/י גובה</button>
            <div class="stepper">
              <button class="step" type="button" id="hMinus" aria-label="פחות">−</button>
              <input id="height" type="number" min="100" max="230" step="1" placeholder="גובה" />
              <button class="step" type="button" id="hPlus" aria-label="יותר">+</button>
            </div>
          </div>
        </label>

        <label>דקות פעילות היום
          <div class="select-suffix">
            <select id="activeMin" class="with-suffix">
              <option value="0">0</option>
              <option value="15">15</option>
              <option value="30" selected>30</option>
              <option value="45">45</option>
              <option value="60">60</option>
              <option value="90">90</option>
            </select>
            <span class="suffix">דקות</span>
          </div>
        </label>

        <!-- צ׳קבוקסים + אייקונים -->
        <div class="checks row one-line">
          <label class="check"><input id="isHot" type="checkbox" /><span>אקלים חם</span></label>
          <label class="check female-only"><input id="pregnant" type="checkbox" /><span>בהריון</span></label>
          <label class="check female-only"><input id="lactating" type="checkbox" /><span>מניקה</span></label>

          <div class="spacer"></div>

          <!-- גובה (אלטיטודה) — אייקון הר קטן -->
          <button id="openAltitude" class="btn icon-btn" type="button" aria-label="גובה" title="גובה">
            <svg viewBox="0 0 24 24" class="icon" fill="none" stroke="#60a5fa" stroke-width="1.8">
              <defs><linearGradient id="altG" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0" stop-color="#7dd3fc"/><stop offset="1" stop-color="#6f5bf0"/>
              </linearGradient></defs>
              <path d="M3 18l6-10 3 5 2-3 7 8H3z" fill="url(#altG)" stroke="none"/>
              <circle cx="18" cy="5" r="1.6" fill="#a5b4fc" stroke="none"/>
            </svg>
          </button>

          <!-- קפה — אייקון ספל קטן -->
          <button id="openCoffee" class="btn icon-btn" type="button" aria-label="קפה" title="קפה">
            <svg viewBox="0 0 24 24" class="icon" fill="none" stroke="#60a5fa" stroke-width="1.8">
              <path d="M3 9h13v6a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9z" fill="#e6f4ff" stroke="#7cc3ff"/>
              <path d="M16 9h2.6a2.4 2.4 0 0 1 0 4.8H16" />
              <path d="M9 4c0 1 .7 1.3.7 2s-.7 1-.7 1M12 4c0 1 .7 1.3.7 2s-.7 1-.7 1" />
            </svg>
          </button>
        </div>

        <button class="btn ripple equal" type="submit">חשב/י</button>
      </form>

      <output id="result" class="result">
        <div class="totals">
          <div class="total-item">
            <span class="lbl">יעד:</span>
            <span id="targetL" class="num">—</span>
            <span class="unit">ליטר</span>
            <span class="cups">
              <span id="targetCups" class="num">—</span>
              <span class="unit">כוסות</span>
            </span>
          </div>
        </div>

        <!-- מד התקדמות Edge-to-Edge -->
        <div class="progress river edge" id="river">
          <div class="progress-head">
            <label for="progressRange">שתייה היום</label>
            <div class="reading">
              <span id="intakeCups" class="num">0.0</span><span class="unit">כוס</span>
              <span class="sep">·</span>
              <span id="intakeMl" class="num">0</span><span class="unit">מ״ל</span>
            </div>
          </div>

          <div class="progress-bar capsule">
            <div id="bar" class="fill stage1">
              <span class="droplet" aria-hidden="true"></span>
              <canvas id="bubbles"></canvas>
            </div>
          </div>

          <div class="row btn-row roomy">
            <button id="add250"  class="btn ghost ripple equal">+250 מ״ל</button>
            <button id="add500"  class="btn ghost ripple equal">+500 מ״ל</button>
            <button id="add1000" class="btn ghost ripple equal">+1 ליטר</button>
            <button id="resetIntake" class="btn danger ripple equal">איפוס</button>
          </div>

          <input id="progressRange" type="range" min="0" max="4000" step="50" value="0" />
        </div>
      </output>
    </section>

    <!-- כרטיס התראות -->
    <section class="card">
      <h2 class="card-title">תזכורות והתראות</h2>

      <div class="grid">
        <label>כל כמה זמן להזכיר?
          <div class="select-suffix">
            <select id="remEvery" class="with-suffix">
              <option>15</option><option>30</option><option selected>45</option><option>60</option><option>90</option>
            </select>
            <span class="suffix">דקות</span>
          </div>
        </label>

        <div class="checks row one-line tight">
          <label class="check"><input id="playSound" type="checkbox" checked /><span>צליל טפטוף</span></label>
          <label class="check"><input id="vibrate" type="checkbox" /><span>רטט בנייד</span></label>
        </div>
      </div>

      <div class="row btn-row bump roomy">
        <button id="startRem" class="btn primary ripple equal">התחל תזכורות</button>
        <button id="stopRem"  class="btn danger  ripple equal">עצור</button>
        <button id="testPing" class="btn ripple equal">בדיקה</button>
      </div>

      <h3 class="h3">התראה חד־פעמית</h3>
      <div class="grid">
        <label>בחר/י זמן
          <div class="select-suffix">
            <select id="alarmMin" class="with-suffix"></select>
            <span class="suffix">דקות</span>
          </div>
        </label>
      </div>
      <div class="row btn-row">
        <button id="startAlarm"  class="btn ripple equal">הפעל התראה</button>
        <button id="cancelAlarm" class="btn ghost ripple equal">בטל התראה</button>
      </div>
      <p class="micro">טיפ: אשר/י התראות בדפדפן כשתופיע בקשה.</p>
    </section>
  </main>

  <footer class="o-foot"><span class="footnote">© 2025 דרינק! · שתו במודעות וברכות.</span></footer>

  <!-- מודלים -->
  <div id="weightModal"  class="modal" hidden><div class="modal-backdrop"></div><div class="modal-card" role="dialog" aria-modal="true"><h3>בחר/י משקל</h3><div id="weightChips" class="chips"></div><div class="row"><button id="closeWeight" class="btn equal">סגור</button></div></div></div>
  <div id="ageModal"     class="modal" hidden><div class="modal-backdrop"></div><div class="modal-card" role="dialog" aria-modal="true"><h3>בחר/י גיל</h3><div id="ageChips" class="chips"></div><div class="row"><button id="closeAge" class="btn equal">סגור</button></div></div></div>
  <div id="heightModal"  class="modal" hidden><div class="modal-backdrop"></div><div class="modal-card" role="dialog" aria-modal="true"><h3>בחר/י גובה</h3><div id="heightChips" class="chips"></div><div class="row"><button id="closeHeight" class="btn equal">סגור</button></div></div></div>
  <div id="coffeeModal"  class="modal" hidden><div class="modal-backdrop"></div><div class="modal-card" role="dialog" aria-modal="true"><h3>קפה — כוסות או מ״ל</h3><div id="coffeeChips" class="chips"></div><div class="row" style="margin-top:10px"><input id="coffeeMl" type="number" min="0" step="10" placeholder="הכנס/י מ״ל" /><button id="setCoffeeMl" class="btn">שמור מ״ל</button></div><p class="micro">כל כוס (~240 מ״ל) מוסיפה ~100 מ״ל ליעד היומי.</p><div class="row"><button id="closeCoffee" class="btn equal">סגור</button></div></div></div>
  <div id="altitudeModal" class="modal" hidden><div class="modal-backdrop"></div><div class="modal-card" role="dialog" aria-modal="true"><h3>גובה</h3><div id="altitudeChips" class="chips"></div><div class="row"><button id="closeAltitude" class="btn equal">סגור</button></div></div></div>

  <script src="app.js"></script>
</body>
</html>
